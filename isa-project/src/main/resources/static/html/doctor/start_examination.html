<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="../../lib/mdb/css/mdb.min.css" rel="stylesheet">
<title>Start examination</title>
</head>
<body>

	<div class="container w-60 mt-5 pt-5 mb-4" id="select_option">
		<div class="card">
			<h5 class="card-header info-color white-text text-center py-4"><strong>Select an option</strong></h5>
			<div class="card-body px-lg-5">
				<div class="row w-100 p-3 h-50">
				 	<div class="col-8" style="margin-top: 5px;">
						<div class="form-check">
						  <input class="form-check-input" type="radio" name="flexRadioDefault" id="start" checked>
						  <label class="form-check-label" for="start">
						    Start appointment and enter a report.
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="radio" name="flexRadioDefault" id="end">
						  <label class="form-check-label" for="end">
						    The patient didn't appear at scheduled appointment.
						  </label>
						</div>
				 	</div>
				 	<div class="col">
				 		<button class="btn btn-outline-info btn-rounded btn-block waves-effect" type="button" id="confirm">Confirm</button>
				 	</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="container w-60 mt-5 pt-5 mb-4" id="examination_report" hidden="true">
		<div class="card">
		<h5 class="card-header info-color white-text text-center py-4"><strong>Examination report</strong></h5>
		
			<div class="card-body p-0">
               <div id="accordion">
                   <div class="card border-0">
                       <div class="card-header" id="headingOne">
                           <h5 class="mb-0">
                               <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                   Basic information
                               </button>
                           </h5>
                       </div>

                       <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                           <div class="card-body p-3  border-bottom">
                           <div class="card-body px-lg-5">
                               <div class="row">
                                   <div class="col">
                                       <label class="text-secondary mb-0">Patient's name:</label><br>
                                       <label id="patientName"></label><br>
                                       <label class="text-secondary mb-0">Patient's surname:</label><br>
                                       <label id="patientSurname"></label><br>
                                   </div>
                                   <div class="col">
                                       <label class="text-secondary mb-0">Doctor's name:</label><br>
                                       <label id="doctorName"></label><br>
                                       <label class="text-secondary mb-0">Doctor's surname:</label><br>
                                       <label id="doctorSurname"></label><br>
                                   </div>
                               </div>
                               <hr>
                               <div class="row">
                                   <div class="col">
                                       <label class="text-secondary mb-0">Start time:</label><br>
                                       <label id="startTime"></label><br>
                                       <label class="text-secondary mb-0">End time:</label><br>
                                       <label id="endTime"></label><br>
                                   </div>
                                   <div class="col">
                                   <label class="text-secondary mb-0">Pharmacy's name:</label><br>
                                       <label id="pharmacyName"></label><br>
                                       <label class="text-secondary mb-0">Price:</label><br>
                                       <label id="price"></label><br>
                                   </div>
                               </div>
                           </div>
                           </div>
                       </div>
                   </div>
                </div>
			</div>
			
			<div class="card border-0">
                <div class="card-header" id="headingTwo">
                    <h5 class="mb-0">
                        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                            Fill in the report
                        </button>
                    </h5>
                </div>
                <div id="collapseTwo" class="collapse show" aria-labelledby="headingTwo" data-parent="#accordion">
                <div class="card-body px-lg-5">
    				<form id="submit_report">
	                    <div class="card-body p-3">
		                    <div class="row">
		                    	<div class="col">
			                        <label class="text-secondary mb-0">Diagnosis:</label><br>
			                        <textarea class="form-control" id="diagnosis" rows="3" required></textarea>
			                    </div>
		                    </div>
		                    <br>
		                    <div class="row">
		                    	<div class="col">
			                    	<label class="text-secondary mb-0" id="label_drugs">Drugs:</label><br>
			                    	<select id="drugs" class="custom-select selectpicker" style="margin-top: 5px;" data-live-search="true"></select>
		                    	</div>
		                    	<div class="col">
			                    	<button class="btn btn-outline-danger btn-rounded btn-block my-4 waves-effect" type="button" id="check">Check availability</button>
		                    	</div>
		                    	<div class="col">
			                    	<button class="btn btn-outline-info btn-rounded btn-block my-4 waves-effect" type="button" id="specification" data-toggle="modal" data-target="#drugSpecificationModal">Specification</button>
		                    	</div>
		                    	<div class="col" hidden="true" id="div_prescribe">
			                    	<button class="btn btn-outline-success btn-rounded btn-block my-4 waves-effect" type="button" id="prescribe" data-toggle="modal" data-target="#prescriptionModal">Prescribe</button>
		                    	</div>
		                    </div>
		                    <div class="row w-100 p-3 h-50">
						        <table class="table" style="margin-top:50px;" id="therapies">
						        	<thead>
						        		<tr>
						        			<th scope="col" style="width: 500px;">Drug</th>
						        			<th scope="col">Daily dose</th>
						        		</tr>
						        	</thead>
						        	<tbody id="body_therapies"></tbody>
						        </table>
					        </div>
	                    </div>
	                    <button class="btn btn-outline-info btn-rounded btn-block my-4 waves-effect" type="submit" id="create">Submit</button>
                    </form>
                </div>
                </div>
            </div>
		</div>
	</div>
	
	<div class="container w-60 mt-5 pt-5 mb-4" id="create_Appointment" hidden="true">
		<div class="card">
			<h5 class="card-header info-color white-text text-center py-4"><strong>Do you want to create a new appointment for the patient?</strong></h5>
			<div class="row w-200 p-3 h-50">
				<div class="card-body p-0">
					<div class="row justify-content-center">
						<div class="col-5">
							<button class="btn btn-outline-success btn-rounded btn-block my-4 waves-effect" type="button" id="newApp">Yes</button>
						</div>
						<div class="col-5">
							<button class="btn btn-outline-danger btn-rounded btn-block my-4 waves-effect" type="button" id="finish">No, finish this examination</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	
	<div class="modal fade" id="prescriptionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info modal-dialog-centered" role="document">
            <div class="modal-content">
            <form id="save_prescription">
                <div class="modal-header">
                    <p class="heading lead">Prescribe drug</p>
                    <button type="button" id="btn_close" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="prescribe_dialog">
                	<p id="hasAllergy" hidden="true">The patient is allergic to the chosen drug.</p>
                	<div class="row" id="noAllergy" hidden="false">
                		<label class="text-secondary mb-0">Duration of therapy (in days):</label><br>
			            <input type="number" class="form-control" id="duration" min="1" required>
                	</div>
                </div>
                <div class="modal-footer">
			        <button type="submit" class="btn btn-success" id="save_changes">Prescribe</button>
			     </div>
			 </form>
            </div>
        </div>
    </div>
    
    
    <div class="modal fade" id="drugAvailabilityModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <p class="heading lead">Prescribe substitute drug</p>
                    <button type="button" id="btn_close_substitute" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form id="save_prescription_substitute">
                <div class="modal-body">
                	<p id="substituteText">The requested drug isn't available, choose one of the substitutes.</p>
                	<hr><br>
                	<div class="row" id="subDrugs">
	                   	<div class="col">
	                    	<label class="text-secondary mb-0">Substitute drugs:</label><br>
	                    	<select id="substituteDrugs" class="custom-select selectpicker" style="margin-top: 5px;"  data-live-search="true"></select>
	                   	</div>
	                </div><br>
	                <div class="row" id="subDrugsDuration">
	                   	<div class="col">
	                    	<label class="text-secondary mb-0">Duration of therapy (in days):</label><br>
	                    	<input type="number" class="form-control" id="durationSubstitute" min="1" required>
	                   	</div>
	                </div><br>
	                <div class="row" id="allergySubstitute" hidden="true">
	                	<div class="col">
	                    	<p style="color:red;">The patient is allergic to the chosen substitute drug. Please choose another drug.</p>
	                   	</div>
	                </div><br>
                </div>
                <div class="modal-footer">
			        <button class="btn btn-success" type="button" id="prescribeSubstitute">Prescribe</button>
			     </div>
			     </form>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="drugSpecificationModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <p class="heading lead">Drug specification</p>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="body_specification">
                	<div class="row w-100 p-3 h-50">
					 	<div class="col">
					 		<label class="text-secondary mb-0">Name:</label><br>
					 	</div>
					 	<div class="col ">
					 		<label class="text mb-0" id="dName"></label>
					 	</div>
					 </div>
					 <div class="row w-100 p-3 h-50">
					 	<div class="col">
					 		<label class="text-secondary mb-0">Type of drug:</label><br>
					 	</div>
					 	<div class="col ">
					 		<label class="text mb-0" id="dType"></label>
					 	</div>
					 </div>
					 <div class="row w-100 p-3 h-50">
					 	<div class="col">
					 		<label class="text-secondary mb-0">Type of drug's form:</label><br>
					 	</div>
					 	<div class="col ">
					 		<label class="text mb-0" id="dForm"></label>
					 	</div>
					 </div>
					 <div class="row w-100 p-3 h-50">
					 	<div class="col">
					 		<label class="text-secondary mb-0">Produces:</label><br>
					 	</div>
					 	<div class="col ">
					 		<label class="text mb-0" id="dProducer"></label>
					 	</div>
					 </div>
					 <div class="row w-100 p-3 h-50">
					 	<div class="col">
					 		<label class="text-secondary mb-0">Contraindication:</label><br>
					 	</div>
					 	<div class="col ">
					 		<label class="text mb-0" id="dContra"></label>
					 	</div>
					 </div>
					 <div class="row w-100 p-3 h-50">
					 	<div class="col">
					 		<label class="text-secondary mb-0">Recommended daily dose:</label><br>
					 	</div>
					 	<div class="col ">
					 		<label class="text mb-0" id="dDose"></label>
					 	</div>
					 </div>
					 <div class="row w-100 p-3 h-50">
					 	<div class="col">
					 		<label class="text-secondary mb-0">Ingredients:</label><br>
					 	</div>
					 	<div class="col">
					 		<label class="text mb-0" id="dIngredients"></label>
					 	</div>
					 </div>
					  <div class="row w-100 p-3 h-50">
					 	<div class="col">
					 		<label class="text-secondary mb-0">Substitute drugs:</label><br>
					 	</div>
					 	<div class="col">
					 		<label class="text mb-0" id="dSubstitute"></label>
					 	</div>
					 </div>
                </div>
            </div>
        </div>
    </div>
	
	<div id="div_alert" style="position: fixed; top: 73px; right:10px; width: 22%; z-index: 9999; border-radius: 0px"></div>
	
	<script type="text/javascript" src="../../lib/mdb/js/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>   
    <script type="text/javascript" src="../../js/jwt_check.js"></script>
    <script type="text/javascript" src="../../js/doctor/start_examination.js"></script>
    
</body>
</html>